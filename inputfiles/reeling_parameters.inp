**
*****************************************************
** PROCESSING PARAMETRISED USER INPUT:
*****************************************************
**
*PARAMETER
**
** ERROR TRAP:
** the minimum permissible weak joint length is:
**
WEAK_JOINT_MINIMUM	= 1.0/PITCH_ELEMENTS
**
WEAK_JOINT		= max(WEAK_JOINT,WEAK_JOINT_MINIMUM)
**
**
** ERROR TRAP:
** the minimum shoulder length is equal to 5 centraliser pitches:
**
SHOULDER		= int(max(5,SHOULDER))
**
**
** ERROR TRAP:
** Round-up the user defined pitch number to be a multiple of 10
** this is required to generate the 10 slide-lines for the PIP Centralisers
**
** ERROR TRAP:
** Determine the minimum number of pitches required to accomodate
** the desired shoulders and the weak joint length.
** This is necessary to prevent element set definition failure.
**
MINIMUM_PITCH_NUMBER1	= int(10.*int(((PITCH_NUMBER+9.)/10.)))
**
** ERROR TRAP:
** PREVENT THE USER FROM DEFINING TOO SHORT MODEL
** Minimum number of pitches to accomodate the desired shoulders and the weak joint length
** this is necessary to prevent element set definition failure.
**
MINIMUM_PITCH_NUMBER2	= int(10.*int((2.*SHOULDER+WEAK_JOINT+11.)/10.))
**
**
** ERROR TRAP:
** generate at least 20 pitches long model
**
PITCH_NUMBER		= int(max(20,MINIMUM_PITCH_NUMBER1,MINIMUM_PITCH_NUMBER2))
**
**
** Normalise PROP direction variable to be ONE, with sign.
PROP_DIRECTION		= int(PROP_DIRECTION / abs(PROP_DIRECTION))
**
** OVERALL MESH PARAMETERS
**
NUMBER_OF_NODES		= int(PITCH_ELEMENTS*PITCH_NUMBER)
NUMBER_OF_ELEMENTS 	= int(NUMBER_OF_NODES-1)
NUMBER_OF_CENTRALISERS	= int(PITCH_NUMBER+1)
MODEL_LENGTH		= PITCH_LENGTH*PITCH_NUMBER
MODEL_LENGTH2		= PITCH_LENGTH*PITCH_NUMBER*2.0
**
** CARRIER NODES / ELEMENTS (1,000,000 SERIES)
MIN_CARRIER_NODE	= int(1.0E6)
NO2_CARRIER_NODE	= int(MIN_CARRIER_NODE + 1)
MAX_CARRIER_NODE	= int(MIN_CARRIER_NODE + NUMBER_OF_NODES)
MAX_CARRIER_ELEMENT	= int(MIN_CARRIER_NODE + NUMBER_OF_ELEMENTS)
**
** FLOWLINE NODES / ELEMENTS (2,000,000 SERIES)
MIN_FLOWLINE_NODE	= int(2.0E6)
NO2_FLOWLINE_NODE	= int(MIN_FLOWLINE_NODE + 1)
MAX_FLOWLINE_NODE	= int(MIN_FLOWLINE_NODE + NUMBER_OF_NODES)
MAX_FLOWLINE_ELEMENT	= int(MIN_FLOWLINE_NODE + NUMBER_OF_ELEMENTS)
**
** CLADDING NODES / ELEMENTS (3,000,000 SERIES)
MIN_CLAD_NODE		= int(3.0E6)
MAX_CLAD_NODE		= int(MIN_CLAD_NODE + NUMBER_OF_NODES)
MAX_CLAD_ELEMENT	= int(MIN_CLAD_NODE + NUMBER_OF_ELEMENTS)
**
**
** CENTRALISER ELEMENTS (6,000,000 SERIES)
MIN_CENTRALISER_ELEMENT	= int(6.0E6)
MAX_CENTRALISER_ELEMENT	= int(MIN_CENTRALISER_ELEMENT + NUMBER_OF_NODES)
**
** AXIAL SOIL ELEMENTS (7,000,000 SERIES)
MIN_SOIL_X_ELEMENT	= int(7.0E6)
MAX_SOIL_X_ELEMENT	= int(MIN_SOIL_X_ELEMENT + NUMBER_OF_NODES)
**
** VERTICAL SOIL ELEMENTS FOR NORMAL PROPS (8,000,000 SERIES)
MIN_SOIL_Y_ELEMENT_UP	= int(8.0E6)
MAX_SOIL_Y_ELEMENT_UP	= int(MIN_SOIL_Y_ELEMENT_UP + NUMBER_OF_NODES)
**
** VERTICAL SOIL ELEMENTS FOR INVERTED PROPS (9,000,000 SERIES)
MIN_SOIL_Y_ELEMENT_DOWN	= int(9.0E6)
MAX_SOIL_Y_ELEMENT_DOWN	= int(MIN_SOIL_Y_ELEMENT_DOWN + NUMBER_OF_NODES)
**
**
**
** SHOULDER & MID SECTION MESH PARAMETERS
**
SHOULDER_ELEMENTS=SHOULDER*PITCH_ELEMENTS
**
CARRIER_SHOULDER_ELEMENT1	= int(MIN_CARRIER_NODE + SHOULDER_ELEMENTS-1)
CARRIER_SHOULDER_ELEMENT2	= int(MAX_CARRIER_NODE - SHOULDER_ELEMENTS  )
CARRIER_SHOULDER_NODE2		= int(MAX_CARRIER_NODE - SHOULDER_ELEMENTS+1)
**
FLOWLINE_SHOULDER_ELEMENT1	= int(MIN_FLOWLINE_NODE + SHOULDER_ELEMENTS-1)
FLOWLINE_SHOULDER_ELEMENT2	= int(MAX_FLOWLINE_NODE - SHOULDER_ELEMENTS  )
FLOWLINE_SHOULDER_NODE2		= int(MAX_FLOWLINE_NODE - SHOULDER_ELEMENTS+1)
**
CLAD_SHOULDER_ELEMENT1		= int(MIN_CLAD_NODE + SHOULDER_ELEMENTS-1)
CLAD_SHOULDER_ELEMENT2		= int(MAX_CLAD_NODE - SHOULDER_ELEMENTS  )
**
CENTRALISER_SHOULDER_ELEMENT1	= int(MIN_CENTRALISER_ELEMENT + SHOULDER_ELEMENTS - PITCH_ELEMENTS)
CENTRALISER_SHOULDER_ELEMENT2	= int(MIN_CENTRALISER_ELEMENT - SHOULDER_ELEMENTS + PITCH_ELEMENTS + NUMBER_OF_NODES)
**
SOIL_X_SHOULDER_ELEMENT1	= int(MIN_SOIL_X_ELEMENT + SHOULDER_ELEMENTS -1)
SOIL_X_SHOULDER_ELEMENT2	= int(MIN_SOIL_X_ELEMENT - SHOULDER_ELEMENTS + NUMBER_OF_NODES+1)
**
SOIL_Y_SHOULDER_ELEMENT1UP	= int(MIN_SOIL_Y_ELEMENT_UP + SHOULDER_ELEMENTS -1)
SOIL_Y_SHOULDER_ELEMENT2UP	= int(MIN_SOIL_Y_ELEMENT_UP - SHOULDER_ELEMENTS + NUMBER_OF_NODES+1)
**
SOIL_Y_SHOULDER_ELEMENT1DOWN	= int(MIN_SOIL_Y_ELEMENT_DOWN + SHOULDER_ELEMENTS -1)
SOIL_Y_SHOULDER_ELEMENT2DOWN	= int(MIN_SOIL_Y_ELEMENT_DOWN - SHOULDER_ELEMENTS + NUMBER_OF_NODES+1)
**
CARRIER_REELED_START 		= int(CARRIER_SHOULDER_ELEMENT1 + 1)
CARRIER_REELED_END 		= int(CARRIER_SHOULDER_ELEMENT2 - 1)
**
FLOWLINE_REELED_START 		= int(FLOWLINE_SHOULDER_ELEMENT1 + 1)
FLOWLINE_REELED_END 		= int(FLOWLINE_SHOULDER_ELEMENT2 - 1)
**
CLAD_REELED_START 		= int(CLAD_SHOULDER_ELEMENT1 + 1)
CLAD_REELED_END 		= int(CLAD_SHOULDER_ELEMENT2 - 1)
**
**
**
**
** PIPE ELEMENT PARAMETERS
**
** twice the carrier coating thickness
CARRIER_COATING_THK2		= 2.0* CARRIER_COATING_THK
**
** EXTERNAL PIPE RADIUS TO DEFINE ELEMENT GEOMETRY
CARRIER_RADIUS 			= 0.5*CARRIER_OD
**
FLOWLINE_N_RADIUS		= 0.5*FLOWLINE_N_OD
FLOWLINE_W_RADIUS		= 0.5*FLOWLINE_W_OD
**
CLAD_N_OD			= FLOWLINE_N_OD - 2.0*FLOWLINE_N_WT
CLAD_W_OD			= FLOWLINE_W_OD - 2.0*FLOWLINE_W_WT
**
CLAD_N_RADIUS			= 0.5*CLAD_N_OD
CLAD_W_RADIUS			= 0.5*CLAD_W_OD	
**
** TEMPERATURE DE-RATING OF THE STRESS AT ZERO YIELD
**
FLOWLINE_W_S025=FLOWLINE_W_S0-FLOWLINE_W_DE_RATE_025
FLOWLINE_W_S050=FLOWLINE_W_S0-FLOWLINE_W_DE_RATE_050
FLOWLINE_W_S100=FLOWLINE_W_S0-FLOWLINE_W_DE_RATE_100
FLOWLINE_W_S150=FLOWLINE_W_S0-FLOWLINE_W_DE_RATE_150
FLOWLINE_W_S200=FLOWLINE_W_S0-FLOWLINE_W_DE_RATE_200
**
CLAD_W_S025=CLAD_W_S0-CLAD_W_DE_RATE_025
CLAD_W_S050=CLAD_W_S0-CLAD_W_DE_RATE_050
CLAD_W_S100=CLAD_W_S0-CLAD_W_DE_RATE_100
CLAD_W_S150=CLAD_W_S0-CLAD_W_DE_RATE_150
CLAD_W_S200=CLAD_W_S0-CLAD_W_DE_RATE_200
**
**
**
**
**
** WEAK JOINT MESH PARAMETERS
**
MID_NODE		= int(NUMBER_OF_NODES/2.0)
WEAK_JOINT_HALF_LENGTH	= 0.5*WEAK_JOINT*PITCH_ELEMENTS
**
CARRIER_WEAK_START 	= int(MIN_CARRIER_NODE  + MID_NODE - WEAK_JOINT_HALF_LENGTH)
CARRIER_WEAK_END 	= int(MIN_CARRIER_NODE  + MID_NODE + WEAK_JOINT_HALF_LENGTH-1)
**
FLOWLINE_WEAK_START 	= int(MIN_FLOWLINE_NODE + MID_NODE - WEAK_JOINT_HALF_LENGTH)
FLOWLINE_WEAK_END 	= int(MIN_FLOWLINE_NODE + MID_NODE + WEAK_JOINT_HALF_LENGTH-1)
**
CLAD_WEAK_START 	= int(MIN_CLAD_NODE + MID_NODE - WEAK_JOINT_HALF_LENGTH)
CLAD_WEAK_END 		= int(MIN_CLAD_NODE + MID_NODE + WEAK_JOINT_HALF_LENGTH-1)
**
CARRIER_NOMINAL_START 	= int(CARRIER_WEAK_END+1)
CARRIER_NOMINAL_END 	= int(CARRIER_WEAK_START-1)
**
FLOWLINE_NOMINAL_START 	= int(FLOWLINE_WEAK_END+1)
FLOWLINE_NOMINAL_END 	= int(FLOWLINE_WEAK_START-1)
**
CLAD_NOMINAL_START 	= int(CLAD_WEAK_END+1)
CLAD_NOMINAL_END 	= int(CLAD_WEAK_START-1)
**
**
**
** VESSEL PARAMETERS
REEL_HUB_RADIUS		= REEL_RADIUS + 0.5*(CARRIER_OD+2.0*CARRIER_COATING_THK)
ALIGNER_HUB_RADIUS	= ALIGNER_RADIUS + 0.5*(CARRIER_OD+2.0*CARRIER_COATING_THK)
REEL_HUB_DIAMETER	= REEL_HUB_RADIUS * 2.0
REEL_WRAP_ANGLE		= 0.999*2.0*MODEL_LENGTH/REEL_HUB_RADIUS
ALIGNER_WRAP_ANGLE	= 0.999*2.0*MODEL_LENGTH/ALIGNER_HUB_RADIUS
ALIGNER_HUB_DIAMETER    = ALIGNER_HUB_RADIUS * 2
**
** STRAIGHTENER GEOMETRY
GEOM_1 = MODEL_LENGTH_MINUS_2 = MODEL_LENGTH - 2.0
GEOM_2 = MODEL_LENGTH_PLUS_2 = MODEL_LENGTH + 2.0
GEOM_3 = MODEL_LENGTH_MINUS_4 = MODEL_LENGTH - 4.5
GEOM_4 = MODEL_LENGTH_MINUS_4_MINUS_RADIUS = MODEL_LENGTH - 4.5 - STRAIGHTENER_RADIUS
GEOM_5 = MODEL_LENGTH_MINUS_7 = MODEL_LENGTH - 7.0
GEOM_6 = MODEL_LENGTH_MINUS_9 = MODEL_LENGTH - 9.0
GEOM_7 = MODEL_LENGTH_MINUS_11 = MODEL_LENGTH - 11.0
GEOM_8 = MODEL_LENGTH_MINUS_4_PLUS_RAD = MODEL_LENGTH - 4.5 + STRAIGHTENER_RADIUS
STRAIGHTENER_RADIUS_2 = STRAIGHTENER_RADIUS * 2
MODEL_LENGTH_2  =   MODEL_LENGTH*2
**
**
**
** PARAMETERS USED TO DEFINE FINITE SLIDE-LINES FOR CENTRALISERS
**
CENTTRALISER_START01	=int(MIN_CENTRALISER_ELEMENT)
CENTTRALISER_START02	=int(MIN_CENTRALISER_ELEMENT+0.1*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
CENTTRALISER_START03	=int(MIN_CENTRALISER_ELEMENT+0.2*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
CENTTRALISER_START04	=int(MIN_CENTRALISER_ELEMENT+0.3*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
CENTTRALISER_START05	=int(MIN_CENTRALISER_ELEMENT+0.4*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
CENTTRALISER_START06	=int(MIN_CENTRALISER_ELEMENT+0.5*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
CENTTRALISER_START07	=int(MIN_CENTRALISER_ELEMENT+0.6*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
CENTTRALISER_START08	=int(MIN_CENTRALISER_ELEMENT+0.7*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
CENTTRALISER_START09	=int(MIN_CENTRALISER_ELEMENT+0.8*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
CENTTRALISER_START10	=int(MIN_CENTRALISER_ELEMENT+0.9*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
**
CENTTRALISER_END01	=int(MIN_CENTRALISER_ELEMENT+0.1*PITCH_NUMBER*PITCH_ELEMENTS)
CENTTRALISER_END02	=int(MIN_CENTRALISER_ELEMENT+0.2*PITCH_NUMBER*PITCH_ELEMENTS)
CENTTRALISER_END03	=int(MIN_CENTRALISER_ELEMENT+0.3*PITCH_NUMBER*PITCH_ELEMENTS)
CENTTRALISER_END04	=int(MIN_CENTRALISER_ELEMENT+0.4*PITCH_NUMBER*PITCH_ELEMENTS)
CENTTRALISER_END05	=int(MIN_CENTRALISER_ELEMENT+0.5*PITCH_NUMBER*PITCH_ELEMENTS)
CENTTRALISER_END06	=int(MIN_CENTRALISER_ELEMENT+0.6*PITCH_NUMBER*PITCH_ELEMENTS)
CENTTRALISER_END07	=int(MIN_CENTRALISER_ELEMENT+0.7*PITCH_NUMBER*PITCH_ELEMENTS)
CENTTRALISER_END08	=int(MIN_CENTRALISER_ELEMENT+0.8*PITCH_NUMBER*PITCH_ELEMENTS)
CENTTRALISER_END09	=int(MIN_CENTRALISER_ELEMENT+0.9*PITCH_NUMBER*PITCH_ELEMENTS)
CENTTRALISER_END10	=int(MIN_CENTRALISER_ELEMENT+1.0*PITCH_NUMBER*PITCH_ELEMENTS)
**
SLIDE_START01		=int(MIN_CARRIER_NODE)
SLIDE_START02		=int(MIN_CARRIER_NODE+0.1*PITCH_NUMBER*PITCH_ELEMENTS)
SLIDE_START03		=int(MIN_CARRIER_NODE+0.2*PITCH_NUMBER*PITCH_ELEMENTS)
SLIDE_START04		=int(MIN_CARRIER_NODE+0.3*PITCH_NUMBER*PITCH_ELEMENTS)
SLIDE_START05		=int(MIN_CARRIER_NODE+0.4*PITCH_NUMBER*PITCH_ELEMENTS)
SLIDE_START06		=int(MIN_CARRIER_NODE+0.5*PITCH_NUMBER*PITCH_ELEMENTS)
SLIDE_START07		=int(MIN_CARRIER_NODE+0.6*PITCH_NUMBER*PITCH_ELEMENTS)
SLIDE_START08		=int(MIN_CARRIER_NODE+0.7*PITCH_NUMBER*PITCH_ELEMENTS)
SLIDE_START09		=int(MIN_CARRIER_NODE+0.8*PITCH_NUMBER*PITCH_ELEMENTS)
SLIDE_START10		=int(MIN_CARRIER_NODE+0.9*PITCH_NUMBER*PITCH_ELEMENTS)
**
SLIDE_END01		=int(MIN_CARRIER_NODE+0.1*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
SLIDE_END02		=int(MIN_CARRIER_NODE+0.2*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
SLIDE_END03		=int(MIN_CARRIER_NODE+0.3*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
SLIDE_END04		=int(MIN_CARRIER_NODE+0.4*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
SLIDE_END05		=int(MIN_CARRIER_NODE+0.5*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
SLIDE_END06		=int(MIN_CARRIER_NODE+0.6*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
SLIDE_END07		=int(MIN_CARRIER_NODE+0.7*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
SLIDE_END08		=int(MIN_CARRIER_NODE+0.8*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
SLIDE_END09		=int(MIN_CARRIER_NODE+0.9*PITCH_NUMBER*PITCH_ELEMENTS+PITCH_ELEMENTS)
SLIDE_END10		=int(MAX_CARRIER_NODE)
**
**
**
** SEABED & PROP SURFACE PARAMETERS
**
MODEL_CENTRE		= MODEL_LENGTH/2.0
SEABED_LENGTH		= MODEL_LENGTH+2.0
SEABED_ELEVATION	=-SEABED_OFFSET*PROP_DIRECTION
SEABED_MOVE		=-SEABED_ELEVATION
**
SEABED_START		= MODEL_CENTRE - PROP_DIRECTION*SEABED_LENGTH/2.0
SEABED_END		= MODEL_CENTRE + PROP_DIRECTION*SEABED_LENGTH/2.0
**
PROP_CENTRE		= MODEL_CENTRE
PROP_ELEVATION		= SEABED_ELEVATION 	- PROP_RADIUS*PROP_DIRECTION
**
PROP_X1			= PROP_CENTRE		- PROP_RADIUS*PROP_DIRECTION
PROP_Y1			= PROP_ELEVATION
**
PROP_X2			= PROP_CENTRE
PROP_Y2			= PROP_ELEVATION	+ PROP_RADIUS*PROP_DIRECTION
**
PROP_X3			= PROP_CENTRE		+ PROP_RADIUS*PROP_DIRECTION
PROP_Y3			= PROP_ELEVATION	
**
**
** PIPELINE WEIGHT AND CONTACT STIFFNESS
**
WEIGHT_F		=-FLOWLINE_N_WEIGHT*PROP_DIRECTION
WEIGHT_C		=-CARRIER_WEIGHT*PROP_DIRECTION
WEIGHT_TOTAL1		= (FLOWLINE_N_WEIGHT+CARRIER_WEIGHT)*1.0
WEIGHT_TOTAL100000	= (FLOWLINE_N_WEIGHT+CARRIER_WEIGHT)*100000
**
**
**
**
**
** SOIL RESISTANCES
**
ELEMENT_LENGTH		= PITCH_LENGTH/PITCH_ELEMENTS
**
AXIAL_MINIMUM_E		= AXIAL_MINIMUM*ELEMENT_LENGTH
AXIAL_MAXIMUM_E		= AXIAL_MAXIMUM*ELEMENT_LENGTH
**
UPLIFT_MINIMUM_E_100	= UPLIFT_MINIMUM*ELEMENT_LENGTH
UPLIFT_MAXIMUM_E_100	= UPLIFT_MAXIMUM*ELEMENT_LENGTH
**
UPLIFT_MINIMUM_E_70	= (UPLIFT_MINIMUM*0.7)*ELEMENT_LENGTH
UPLIFT_MAXIMUM_E_70	= (UPLIFT_MAXIMUM*0.7)*ELEMENT_LENGTH
**FOUNDATION_MIN_E1	= FOUNDATION_MIN1*ELEMENT_LENGTH
FOUNDATION_MIN_E2	= FOUNDATION_MIN2*ELEMENT_LENGTH
**
**FOUNDATION_MAX_E1	= FOUNDATION_MAX1*ELEMENT_LENGTH
FOUNDATION_MAX_E2	= FOUNDATION_MAX2*ELEMENT_LENGTH
**
**
**
*****************************************************
** END OF PROCESSING USER INPUT
*****************************************************
**